{% extends "basebs.html" %}
{% load sga_extras %}
{% block heading %}
    <link href="/static/css/table-responsive.css?1.0.0" type="text/css" rel="stylesheet"/>
    <script type="text/javascript" src="/static/js/jquery.fancybox.pack.js?v=1.0.0"></script>
    <link rel="stylesheet" href="/static/css/jquery.fancybox.css?v=1.0.0" type="text/css" media="screen"/>
    <script type="text/javascript" src='/static/js/select2.js?v=1.0.0'></script>
    <link type='text/css' rel='stylesheet' href="/static/css/select2.css?v=1.0.0"/>
    <script type="text/javascript">
        $(document).ready(function () {
            $(".fancybox").fancybox();
        });
        $(function () {
            $(".generarmatricula").click(function () {
                var idins = $(this).attr('idins');
                var fechavence = $(this).attr('fechavence');
                var valorcohorte = $(this).attr('valorcohorte');
                if (fechavence == '') {
                    smoke.alert("Favor configurar fecha vencimiento del rubro");
                    return false;
                }
                smoke.confirm("¿Está seguro de generar matricula.? " +
                    "\n Le recordamos que el rubro de matrícula se generará con el valor de  $" + valorcohorte + " y la fecha de vencimiento del rubro será: " + fechavence +
                    "\n Si el valor es otro favor ir a la cohorte y editarlo.", function (e) {
                    if (e) {
                        {#$.blockUI({message: null});#}
                        bloqueointerface();
                        var id = idins;
                        $.ajax({
                            type: "POST",
                            url: "/admitidos",
                            data: {'action': 'generarmatricula', 'id': id},
                            error: function () {
                                $.unblockUI();
                                smoke.alert("Error al obtener los datos.");
                            },
                            success: function (data) {
                                if (data.result == "ok") {
                                    location.reload();
                                } else {
                                    $.unblockUI();
                                    smoke.alert(data.mensaje);
                                }
                            }
                        });
                    }
                }, {
                    ok: "SI,GENERAR RUBRO DE MATRÍCULA",
                    cancel: "NO,CANCELAR",
                    classname: "custom-class",
                    reverseButtons: true
                });
            });
            $(".generarcostoprograma").click(function () {
                var idins = $(this).attr('idins');
                var fechavence = $(this).attr('fechavence');
                var valorcohorte = $(this).attr('valorcohorte');
                if (fechavence == '') {
                    smoke.alert("Favor configurar fecha vencimiento del rubro");
                    return false;
                }
                smoke.confirm("¿Está seguro de generar rubro del programa de maestría.? " +
                    "\n Le recordamos que el rubro de programa de maestría se generará con el valor de  $" + valorcohorte + " y la fecha de vencimiento del rubro será: " + fechavence +
                    "\n Si el valor es otro favor ir al módulo consulta deuda y editarlo.", function (e) {
                    if (e) {
                        {#$.blockUI({message: null});#}
                        bloqueointerface();
                        var id = idins;
                        $.ajax({
                            type: "POST",
                            url: "/admitidos",
                            data: {'action': 'generarrubroprograma', 'id': id},
                            error: function () {
                                $.unblockUI();
                                smoke.alert("Error al obtener los datos.");
                            },
                            success: function (data) {
                                if (data.result == "ok") {
                                    location.reload();
                                } else {
                                    $.unblockUI();
                                    smoke.alert(data.mensaje);
                                }
                            }
                        });
                    }
                }, {
                    ok: "SI,GENERAR RUBRO DE PROGRAMA",
                    cancel: "NO,CANCELAR",
                    classname: "custom-class",
                    reverseButtons: true
                });
            });/*
            $(".eliminarpostulante").click(function () {
                var idins = $(this).attr('idins');
                $("#eliminarpostulante").modal('show');
                $("#eliminarpostulante_run").attr({"idins": idins});
            });

            $("#eliminarpostulante_close").click(function () {
                $("#eliminarpostulante").modal('hide');
            });
            $("#eliminarpostulante_run").click(function () {
                var idinscripcion = $(this).attr('idins');
                var motivo = $("#motivo").val();
                if (motivo.trim().length > 0) {
                    bloqueointerface();
                    var id = idinscripcion;
                    $.ajax({
                        type: "POST",
                        url: "/admitidos",
                        data: {'action': 'delinscripcion','idinscripcion':id,'motivo':motivo },
                        error: function () {
                            $.unblockUI();
                            smoke.alert("Error al obtener los datos.");
                        },
                        success: function (data) {
                            if (data.result == "ok") {
                                location.reload();
                            } else {
                                $.unblockUI();
                                smoke.alert(data.mensaje);
                            }
                        }
                    });

                }
            });*/

            $(".deleteparticipante").click(function () {
                var idinscripcion = $(this).attr('idins');
                smoke.confirm("¿Está seguro de eliminar a postulante de maestría.? " +
                    "\n NOTA: Le recordamos que al eliminarlo, se borraran todos los registros de inscripción tales como:" +
                    "\n Evidencias de requisitos, exámen, entrevista.", function (e) {
                    if (e) {
                        bloqueointerface();
                        var id = idinscripcion;
                        $.ajax({
                            type: "POST",
                            url: "/admitidos",
                            data: {'action': 'delinscripcion', 'idinscripcion': id},
                            error: function () {
                                $.unblockUI();
                                smoke.alert("Error al obtener los datos.");
                            },
                            success: function (data) {
                                if (data.result == "ok") {
                                    location.reload();
                                } else {
                                    $.unblockUI();
                                    smoke.alert(data.mensaje);
                                }
                            }
                        });
                    }
                }, {
                    ok: "SI, ELIMINAR",
                    cancel: "NO,CANCELAR",
                    classname: "custom-class",
                    reverseButtons: true
                });
            });
            $("#boton_notoficacionaprobadaotracohorteadmintido").click(function () {
                var obersavioncambiocohorte = $('#obersavioncambiocohorte').val();
                if ($('#obersavioncambiocohorte').val().length != 0) {
                    smoke.confirm("¿Está seguro(a) de cambiarse a otra cohorte?\n Solo se podrá cambiar una vez.", function (e) {
                        if (e) {
                            var idinscripcioncohorteotracohorte = $('#idinscripcioncohorteotracohorteadmitido').val();
                            var id_cohorte = $('#id_cohorteadmitido').val();
                            var obersavioncambiocohorte = $('#obersavioncambiocohorte').val();
                            bloqueointerface();
                            $.ajax({
                                type: "POST",
                                url: "/admitidos",
                                data: {'action': 'cambiocohorteadm', 'idinscripcioncohorteotracohorteadmitido': idinscripcioncohorteotracohorte, 'obersavioncambiocohorte': obersavioncambiocohorte, 'id_cohorte': id_cohorte},
                                error: function () {
                                    $.unblockUI();
                                    smoke.alert("Error al obtener los datos.");
                                },
                                success: function (data) {
                                    if (data.result == "ok") {
                                        $("#adminitidomodalnotoficacionotracohorte").modal({backdrop: 'static', width: '600px'}).modal('hide');
                                        location.reload();
                                    } else {
                                        $.unblockUI();
                                        smoke.alert(data.mensaje);
                                    }
                                }
                            });
                        }
                    }, {
                        ok: "SI, CAMBIAR",
                        cancel: "NO,CANCELAR",
                        classname: "custom-class",
                        reverseButtons: true
                    });
                } else {
                    $("#obersavioncambiocohorte").focus();
                    return false;
                }
            });
            $(".inscribir_view").click(function () {
                var idi = $(this).attr('idi');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/admitidos",
                    data: {'action': 'inscribir_view', 'idi': idi},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            if (data.nivelcreado == false) {
                                $("#btninscribir").hide()
                            } else {
                                $("#btninscribir").show()
                            }
                            $("#nombrepostulante").html(data.nombrespostulante);
                            $(".panelbodyinscribir").html(data.data);
                            $("#itemspanelinscribir").modal({backdrop: 'static', width: '900px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });
            $("#itemspanelinscribir .btn-cerrarinscribir").click(function () {
                $("#itemspanelinscribir").modal("hide");
                return false;
            });
            $("#itemspanelinscribir .btn-inscribir").click(function () {
                var idintegranteentrevista = $("#idintegranteentrevista").val()
                var codigosede = $("#codigosede").val()
                var codigocarrera = $("#codigocarrera").val()
                var codigomodalidad = $("#codigomodalidad").val()
                var codigosesion = $("#codigosesion").val()
                var id_periodoelegir = $("#id_periodoelegir").val()

                var idnivel = $("#idnivel").val()
                var codigoperiodo = $("#codigoperiodo").val()
                {#return false;#}
                bloqueointerface();
                $.ajax({
                    type: "POST",
                    url: "/admitidos",
                    data: {
                        'action': 'inscribirmatricular',
                        'idintegranteentrevista': idintegranteentrevista,
                        'codigosede': codigosede,
                        'codigocarrera': codigocarrera,
                        'codigomodalidad': codigomodalidad,
                        'codigosesion': codigosesion,
                        'idnivel': idnivel,
                        'id_periodoelegir': id_periodoelegir,
                        'codigoperiodo': codigoperiodo
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error al obtener los datos.");
                    },
                    success: function (data) {
                        if (data.result == "ok") {
                            $("#itemspanelinscribir").modal("hide");
                            location.reload();
                        } else {
                            $.unblockUI();
                            smoke.alert(data.mensaje);
                        }
                    }
                });
            });

            $(".mostrarrubrosvsamortizacion_view").click(function () {
                var idi = $(this).attr('idi');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/admitidos",
                    data: {'action': 'existerubroajutar', 'idi': idi},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $("#itemspanel .paneltitle").html('Rubros vs Tabla de amotización');
                            $("#itemspanel .panelbody").html(data.data);
                            $("#itemspanel").modal({backdrop: 'static', width: '900px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });

            $(".mostrardetalle_view").click(function () {
                var idi = $(this).attr('idi');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/admitidos",
                    data: {'action': 'detallepago', 'idi': idi},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbody").html(data.data);
                            $("#itemspanel").modal({backdrop: 'static', width: '900px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });
            $("#itemspanel .btn-cerrar").click(function () {
                $("#itemspanel").modal("hide");
                return false;
            });
            $("#cancel_notoficacioncancelaotracohorteadmitidos").click(function () {
                $('#adminitidomodalnotoficacionotracohorte').modal('hide');
            });
            $(".mostrardetallerequisitos_view").click(function () {
                var idi = $(this).attr('idi');
                bloqueointerface();
                $.ajax({
                    type: "GET",
                    url: "/admitidos",
                    data: {'action': 'detallerequisitos', 'idi': idi},
                    success: function (data) {
                        $.unblockUI();
                        if (data.result == 'ok') {
                            $(".panelbodyrequisitos").html(data.data);
                            $("#itemspanelrequisitos").modal({backdrop: 'static', width: '1200px'}).modal('show');
                        } else {
                            smoke.alert(data.mensaje);
                        }
                    },
                    error: function () {
                        $.unblockUI();
                        smoke.alert("Error de conexión.");
                    },
                    dataType: "json"
                });
            });
            $("#itemspanelrequisitos .btn-cerrarrequisitos").click(function () {
                $("#itemspanelrequisitos").modal("hide");
                return false;
            });

            $("select").select2({minimumResultsForSearch: 10});

            busqueda = function () {
                var term = $("#searchinput").val().trim().toUpperCase();
                var c = $("#carrera_list").val();
                var mencion = $("#id_mencion").val();
                var estado = $("#id_formapago").val();
                var estadomatricula = $("#id_estadomatricula").val();

                if (term.length > 0) {
                    bloqueointerface();
                    location.href = "/admitidos?s=" + term + "&c=" + c + "&mencion=" + mencion + "&estado=" + estado + "&estadomatricula=" + estadomatricula;
                } else {
                    bloqueointerface();
                    location.href = "/admitidos?c=" + c + "&mencion=" + mencion + "&estado=" + estado + "&estadomatricula=" + estadomatricula;
                }
                return false;
            };

            $("#search").click(function () {
                busqueda();
            });

            $("#carrera_list").change(function () {
                busqueda();
            });

            $("#id_mencion").change(function () {
                busqueda();
            });

            $("#id_formapago").change(function () {
                busqueda();
            });

            $("#id_estadomatricula").change(function () {
                busqueda();
            });

            $('#searchinput').keyup(function (e) {
                if (e.keyCode == 13) {
                    busqueda();
                }
            });

            $(".pdfcertificado").click(function () {
                var idins = $(this).attr('idins');
                var itinerario = $(this).attr('itinerario');
                var tieneitinerario = $(this).attr('tieneitinerario');
                if (tieneitinerario == 'True' && itinerario == 0) {
                    alertaWarning('No es posible descargar el certificado de admitido, ya que no tiene asignada una mención en la maestría')
                } else {
                    bloqueointerface();
                    $.ajax({
                        type: "POST",
                        url: "/admitidos",
                        data: {'action': 'pdfcertificadototalprograma', 'idins': idins},
                        error: function () {
                            $.unblockUI();
                            smoke.alert("Error al obtener los datos.");
                        },
                        success: function (data) {
                            $.unblockUI();
                            if (data.result === "ok") {
                                window.open(data.url, '_blank');
                            } else {
                                smoke.alert(data.mensaje);
                            }
                        }
                    })
                }
            });

        });

        const descargar_requisitos_admision = (pk) =>{
            Swal.fire({
                    title: "Descarga de requisitos de admisión del maestrante",
                    type: 'info',
                    showCancelButton: true,
                    allowOutsideClick: false,
                    confirmButtonText: 'Descargar',
                    cancelButtonText: 'Cancelar'
                }).then((result) => {
                     if (result.value) {
                         bloqueointerface();
                          openwindow('GET', '{{ request.path }}', {
                            action: 'descargarrequisitosadmision',
                            id: pk,
                        }, '_blank');
                          $.unblockUI();
                     }
                })
        }

        function mostrarenviootracohorte(idinscripcion, estadoaprobador, nompostulante) {

            $('#idinscripcioncohorteotracohorteadmitido').val(idinscripcion);
            $("#idnombrespostulanteotracohorte").html('');
            $("#idnombrespostulanteotracohorte").html(nompostulante);
            bloqueointerface();
            $("#adminitidomodalnotoficacionotracohorte").modal({backdrop: 'static', width: '600px'}).modal('show');
            $.unblockUI();
        }

    </script>
{% endblock %}
{% block atras %}/{% endblock %}
{% block canvas %}
    <div class='row-fluid'>
        <div class='span12'>
            <h4>{{ title }} </h4>
        </div>
    </div>

    <div class="row-fluid">
        <div class="span12">
            <table class="table table-condensed table-bordered" style="border: 0">
                <tr>
                    <td>

<!--                        {#                        {% if perms.posgrado.puede_firmar_contratos_pago %}#}-->
<!--{#                        <div class="btn-group" style="margin-right: 8px">#}-->
<!--{#                            <a class="btn btn-success" href="/admitidos?action=firmaelectronicacontratos"><i class="fa fa-pencil-alt"></i> Firmar contratos de pagos</a>#}-->
<!--{#                        </div>#}-->
<!--{#                        {% endif %}#}-->

                        {% if perms.posgrado.puede_firmar_contratos_pago %}
                            <div class="btn-group" style="margin-right: 8px">
                                <a class="btn btn-success" href="/admitidos?action=firmaelectronicacontratos"> Firmar contratos de pagos</a>
                            </div>
                        {% endif %}
                        <div class="btn-group" style="margin-right: 8px">
                            {% if carreraselect > 0 %}
                                <a class="btn btn-warning" href="/admitidos?action=listadoadmitidosconpago&idcohorte={{ carreraselect }}&mencion={{ mencionselect }}&estado={{ estado }}"><i class="fa fa-file-excel-o fa-lg"></i> Listado de admitidos</a>
                            {% endif %}
                        </div>
                        <div class="btn-group" style="margin-right: 8px">
                            {% if carreraselect > 0 %}
                                <a class="btn btn-info" href="/admitidos?action=descargarrequisitosadmisionmasivo&idcohorte={{ carreraselect }}&estadomatricula={{ estadomatricula }}"><i class="fa fa-download fa-lg"></i> Descarga masiva de requisitos</a>
                            {% endif %}
                        </div>
                    </td>
                    <td>
                        <div class="span12" style="float: right">
                            <form class="form-search" onsubmit="return busqueda()">
                                <input style="float: right" class='searchinput' type='text' id='searchinput' value='{{ search }}' autocomplete="off" placeholder="Buscar por nombre, apellido o cédula"/>
                                <a style="float: right; margin-right: 3px" href="javascript:;" id='search' class='btn btn-info'><i class="fa fa-search "></i>
                                    <t class="hidden-phone hidden-tablet ">Buscar</t>
                                </a>
                                {% if search or ids %}
                                    <a href="/admitidos" class='btn btn-info'><i class="fa fa-refresh "></i>
                                        <t class="hidden-phone hidden-tablet ">Todos</t>
                                    </a>
                                {% endif %}
                            </form>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <div class="row-fluid">
        <div class="span12">
            <table class="table table-condensed table-bordered" style="border: 0">
                <tr>
                    <td style="width: 25%">
{#                        <div class='span5'>#}
                            {% if cohortes %}
                                <form class="form-search">
                                    <i class="fa fa-graduation-cap"></i> Cohortes: <br>
                                    <select id="carrera_list">
                                        <option value="0">TODOS</option>
                                        {% for cohorte in cohortes %}
                                            <option {% if carreraselect == cohorte.id %}selected{% endif %} value="{{ cohorte.id }}">{{ cohorte.descripcion }} - {{ cohorte.alias }} {{ cohorte.numerochorte }} - {{ cohorte.maestriaadmision.carrera }}</option>
                                        {% endfor %}
                                    </select>
                                </form>
                            {% endif %}
{#                        </div>#}
                    </td>
                    <td style="width: 10%">
                        <i class="fa fa-tag"></i> Mención: <br>
                        <select name="id_mencion" id="id_mencion" style="width: 100%">
                            <option value="0">TODOS</option>
                            {% for mencion in menciones %}
                                <option {% if mencionselect == mencion.itinerario %} selected {% endif %} value="{{ mencion.itinerario }}"> {{ mencion.nombre }} </option>
                            {% endfor %}
                            {% if carreram.maestriaadmision.carrera.malla.tiene_itinerario_malla_especialidad %}
                                <option {% if mencionselect == 3 %} selected {% endif %} value="3">SIN MENCIÓN</option>
                            {% endif %}
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        <i class="fa fa-tag"></i> Forma de Pago: <br>
                        <select name="id_formapago" id="id_formapago" style="width: 15%">
                            <option value="0">TODOS</option>
                            <option value="1" {% if estado == 1 %} selected {% endif %}>CONTADO</option>
                            <option value="2" {% if estado == 2 %} selected {% endif %}>FINANCIAMIENTO</option>
                        </select>
                    </td>
                    <td>
                        <i class="fa fa-tag"></i> Estado: <br>
                        <select name="estadomatricula" id="id_estadomatricula" style="width: 100%">
                            <option value="0">TODOS</option>
                            <option value="1" {% if estadomatricula == 1 %} selected {% endif %}>MATRICULADO</option>
                            <option value="2" {% if estadomatricula == 2 %} selected {% endif %}>NO MATRICULADO</option>
                        </select>
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <div id="no-more-tables"><!-- inicio no more tables-->
        <div class='row-fluid'>
            <div class='span12'>
                <table class='table table-bordered table-striped'>
                    <thead>
                    <tr>
                        <th style="width: 25px;text-align: center">N.</th>
                        <th style="width: 300px;">APELLIDOS Y NOMBRES</th>
                        <th style="width: 300px;">COHORTES</th>
                        <th style="width: 30px; text-align: center;" class="hidden-phone hidden-tablet ">RUBRO GENERADO</th>
{#                        <th style="width: 30px; text-align: center;" class="hidden-phone hidden-tablet ">RUBRO CANCELADO</th>#}
                        <th style="width: 30px; text-align: center" class="hidden-phone hidden-tablet ">ESTADO</th>
                        <th style="width: 80px;"></th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for inscripcion in listadoadmitidossinproceso %}
                        <tr>
                            <td style="vertical-align:middle; text-align: center;" data-title='N.'>
                                {% if numeropagina == 1 %}
                                    {{ forloop.counter }}
                                {% else %}
                                    {% with contador=numerofilasguiente|sumar_pagineo:forloop.counter %}
                                        {{ contador }}
                                    {% endwith %}
                                {% endif %}
                            </td>
                            <td style="vertical-align:middle; text-align: left;" data-title='NOMBRES'>
                                <strong><span class="fa fa-id-badge"></span> {{ inscripcion.inscripcionaspirante.persona.cedula }}
                                </strong>| <span class="fa fa-user"></span> {{ inscripcion.inscripcionaspirante.persona }}
                                <br>
                                <span class="fa fa-envelope"></span> {{ inscripcion.inscripcionaspirante.persona.email }} | <span class="fa fa-phone-square"></span> {{ inscripcion.inscripcionaspirante.persona.telefono }}
                                {% if inscripcion.inscripcion.tipobeca %}
                                    <br>
                                    <span class="label label-warning">
                                        {{ inscripcion.tipobeca.descuentoposgrado.nombre }}
                                    </span>
                                {% endif %}
                                <br>
                                {% if inscripcion.cambioadmitido %}
                                    <strong> Cambio de cohorte: <span class="label label-info"> {{ inscripcion.cambioadmitido }} </span> <br> Observación: <span class="label label-info"> {{ inscripcion.cambioadmitido.observacion }}</span></strong>
                                {% endif %}
                                {% if inscripcion.formapagopac %}
                                    {% if inscripcion.formapagopac.id == 1 %}
                                        <span class="label label-info">{{ inscripcion.formapagopac.descripcion }}</span>
                                    {% elif inscripcion.formapagopac.id == 2 %}
                                        <span class="label label-info">{{ inscripcion.formapagopac.descripcion }}</span>
                                    {% endif %}
                                {% endif %}
                                {% if inscripcion.tiene_contrato_aprobado %}
                                    <span class="label label-success tb" title="CONTRATO APROBADO">CA</span>
                                {% endif %}
                                {% if inscripcion.tiene_pagare_aprobado %}
                                    <span class="label label-success tb" title="PAGARÉ APROBADO">PA</span>
                                {% endif %}
                                {% if inscripcion.formapagopac %}
                                    {% if inscripcion.formapagopac.id == 2 %}
                                        {% if inscripcion.pago_rubro_matricula %}
                                            <span class="label label-info tb" title="CANCELÓ LA CUOTA INICIAL">CCI</span>
                                        {% endif %}
                                    {% endif %}
                                {% endif %}
                                {% if inscripcion.inscripcion %}
                                    <span class="label label-default tb" title="INSCRIPCIÓN CREADA{% if persona.usuario.is_superuser %} :{{ inscripcion.inscripcion.id }}{% endif %}">INSC</span>
                                {% endif %}
                            </td>
                            <td style="vertical-align:middle; text-align: left;" data-title='COHORTES'>
                                {{ inscripcion.cohortes.descripcion }} <br>
                                {{ inscripcion.cohortes.maestriaadmision.carrera }}
                                {% if inscripcion.cohortes.maestriaadmision.carrera.malla.tiene_itinerario_malla_especialidad %}
                                    {% if inscripcion.itinerario == 0 %}
                                        <br>SIN MENCIÓN
                                    {% else %}
                                        CON MENCIÓN EN {{ inscripcion.nombre_mencion|upper }}
                                    {% endif %}
                                {% endif %}
                                {#                                {%  if inscripcion.inscripcion.cohortes.valormatricula %}#}
                                {#                                    {%  if inscripcion.inscripcion.cohortes.valormatricula < 1  %}#}
                                {#                                        <label class="label label-important"> No tiene configurado valor de matrícula, favor comunicarse con coordinador de maestría</label>#}
                                {#                                    {% endif %}#}
                                {#                                {% else %}#}
                                {#                                    <label class="label label-important"> No tiene configurado valor de matrícula, favor comunicarse con coordinador de maestría</label>#}
                                {#                                {% endif %}#}
                            </td>
                            <td style="vertical-align:middle; text-align: center;" data-title='RUBRO GENERADO'>
                                {#                                {% if inscripcion.inscripcion.cohortes.valormatricula %}#}
                                {% if inscripcion.tipocobro == 2 %}
                                    {#                                    {%  if inscripcion.inscripcion.cohortes.valormatricula > 0  %}#}
                                    {% if inscripcion.genero_rubro_matricula %}
                                        <span><i style="color: green" class="fa fa-check tu"></i></span>
                                    {% else %}
                                        <span><i style="color: brown" class="fa fa-close tu"></i></span>
                                    {% endif %}
                                    {#                                    {% endif %}#}
                                {% endif %}
                                {#                                {% if inscripcion.inscripcion.cohortes.valorprograma %}#}
                                {% if inscripcion.tipocobro == 3 %}
                                    {#                                    {%  if inscripcion.inscripcion.cohortes.valorprograma > 0  %}#}
                                    {% if inscripcion.genero_rubro_programa %}
                                        <span><i style="color: green" class="fa fa-check tu"></i></span>
                                    {% else %}
                                        <span><i style="color: brown" class="fa fa-close tu"></i></span>
                                    {% endif %}
                                    {#                                    {% endif %}#}
                                {% endif %}
                            </td>
{#                            <td style="vertical-align:middle; text-align: center;" data-title='RUBRO CANCELADO'>#}
{#                                {% if inscripcion.tipocobro == 2 %}#}
                                    {#                                    {%  if inscripcion.inscripcion.cohortes.valormatricula > 0  %}#}
{#                                    {% if inscripcion.cancelo_rubro_matricula %}#}
{#                                        <span><i style="color: green" class="fa fa-check tu"></i></span>#}
{#                                    {% else %}#}
{#                                        <span><i style="color: brown" class="fa fa-close tu"></i></span>#}
{#                                    {% endif %}#}
                                    {#                                    {% endif %}#}
{#                                {% endif %}#}
{##}
{#                                {% if inscripcion.tipocobro == 3 %}#}
                                    {#                                    {%  if inscripcion.inscripcion.cohortes.valorprograma > 0  %}#}
{#                                    {% if inscripcion.cancelo_rubro_programa %}#}
{#                                        <span><i style="color: green" class="fa fa-check tu"></i></span>#}
{#                                    {% else %}#}
{#                                        <span><i style="color: brown" class="fa fa-close tu"></i></span>#}
{#                                    {% endif %}#}
                                    {#                                    {% endif %}#}
{#                                {% endif %}#}
{#                            </td>#}
                            <td style="vertical-align:middle; text-align: center;">
                                {% if not inscripcion.esta_inscrito %}
                                    <a class="label label-warning tu" title="Secretaría inscribe al postulante una vez cancelado el rubro de matrícula">NO MATRICULADO</a>
                                {% else %}
                                    <a class="label label-info">MATRICULADO</a>
                                {% endif %}
                            </td>
                            <td style="vertical-align:middle; text-align: center;" data-title='ACCIONES'>
                                <div class="btn-group">
                                    <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown" href="javascript:;">Acciones<span class="caret"></span></a>
                                    <ul class="dropdown-menu pull-right" style="text-align: left">
{#                                        {% for rubro in  inscripcion.eliminar_aspirante_matricula %}#}
{#                                            {% if  inscripcion.genero_rubro_matricula %}#}
{#                                                {% if rubro.total_pagado  >= 0  and rubro.total_pagado <= 0 %}#}
{#                                                    <li><a class="deleteparticipante " idins="{{ inscripcion.id }}" href="javascript:;"><span class="fa fa-trash-o"></span> Eliminar a postulante</a></li>#}
{#                                                {% endif %}#}
{#                                            {% endif %}#}
{#                                        {% endfor %}#}
                                        {% if  inscripcion.puede_eliminar_aspirante_matricula %}
                                            <li><a class="deleteparticipante " idins="{{ inscripcion.id }}" href="javascript:;"><span class="fa fa-trash-o"></span> Eliminar a postulante</a></li>
                                        {% endif %}
                                        {% for rubro in  inscripcion.eliminar_aspirante_programa %}
                                            {% if  inscripcion.genero_rubro_programa %}
                                                {% if rubro.total_pagado  >= 0  and rubro.total_pagado <= 0 %}
                                                    <li><a class="deleteparticipante " idins="{{ inscripcion.id }}" href="javascript:;"><span class="fa fa-trash-o"></span> Eliminar a postulante</a></li>
                                                {% endif %}
                                            {% endif %}
                                        {% endfor %}
                                        {% if inscripcion.tipocobro == 1 %}
                                            {% if not inscripcion.genero_rubro_matricula %}
                                                {% if inscripcion.cohortes.valormatricula %}
                                                    {% if inscripcion.cohortes.valormatricula > 0 %}
                                                        {#                                                        <li><a class="generarmatricula" idins="{{ inscripcion.id }}" valorcohorte="{{ inscripcion.inscripcion.cohortes.valormatricula }}" fechavence="{% if inscripcion.inscripcion.cohortes.fechavencerubro %}{{ inscripcion.inscripcion.cohortes.fechavencerubro|date:"Y-m-d" }}{% endif %}" href="javascript:;"><span class="fa fa-money"></span> Generar matricula</a></li>#}
                                                        <li><a class="deleteparticipante " idins="{{ inscripcion.id }}" href="javascript:;"><span class="fa fa-trash-o"></span> Eliminar a postulante</a></li>
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}
                                        {% endif %}
                                        {% if inscripcion.tipocobro == 1 %}
                                            {% if not inscripcion.genero_rubro_programa %}
                                                {% if inscripcion.cohortes.valorprograma %}
                                                    {% if inscripcion.cohortes.valorprograma > 0 %}
                                                        {#                                                        <li><a class="generarcostoprograma" idins="{{ inscripcion.id }}" valorcohorte="{{ inscripcion.inscripcion.cohortes.valorprograma }}" fechavence="{% if inscripcion.inscripcion.cohortes.fechavencerubro %}{{ inscripcion.inscripcion.cohortes.fechavencerubro|date:"Y-m-d" }}{% endif %}" href="javascript:;"><span class="fa fa-money"></span> Generar rubro programa maestría</a></li>#}
                                                        <li><a class="deleteparticipante " idins="{{ inscripcion.id }}" href="javascript:;"><span class="fa fa-trash-o"></span> Eliminar a postulante</a></li>
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}
                                        {% endif %}
                                        <li><a class="mostrardetalle_view tl" href="javascript:;" idi="{{ inscripcion.id }}"><span class="fa fa-list"></span> Detalle pago</a></li>
                                        <li><a class="mostrarrubrosvsamortizacion_view tl" href="javascript:;" idi="{{ inscripcion.id }}"><span class="fa fa-list"></span> Rubros vs tabla de amortización</a></li>
                                        {% if c %}
                                            {% if not inscripcion.cambioadmitido %}
                                                {% if not inscripcion.esta_inscrito %}
                                                    <li><a href='#' onclick="mostrarenviootracohorte({{ inscripcion.id }},{{ inscripcion.estado_aprobador }},'{{ inscripcion.inscripcionaspirante.persona }}')"><span class="fa fa-mail-forward "></span> Enviar a otra cohorte</a></li>
                                                {% endif %}
                                            {% endif %}
                                        {% endif %}
{#                                        {% if inscripcion.genero_rubro_programa %}#}
                                        {% if inscripcion.estado_aprobador == 2 %}
                                            <li><a href="javascript:;" class="pdfcertificado" idins="{{ inscripcion.id }}" itinerario="{{ inscripcion.itinerario }}" tieneitinerario="{{ inscripcion.cohortes.maestriaadmision.carrera.malla.tiene_itinerario_malla_especialidad }}"><i class="fa fa-certificate"></i>Descargar Certificado de Admitidos</a></li>
                                        {% endif %}
                                        <li><a class="mostrardetallerequisitos_view tl" href="javascript:;" idi="{{ inscripcion.id }}"><span class="fa fa-list"></span> Detalle requisitos</a></li>
                                        {% if inscripcion.cohortes.valormatricula or inscripcion.cohortes.valorprograma %}
                                            {% if inscripcion.cohortes.valormatricula > 0 or inscripcion.cohortes.valorprograma %}
                                                {#                                                {% if not inscripcion.esta_inscrito %}#}
                                                <li><a class="inscribir_view tl" href="javascript:;" idi="{{ inscripcion.id }}"><span class="fa fa-plus"></span> Inscribir</a></li>
                                                {#                                                    <li><a class="bloqueo_pantalla" href="/admitidos?action=inscribircarrera&id={{ inscripcion.id|encrypt }}"><span class="fa fa-plus"></span> Inscribir</a></li>#}
                                                {#                                                {% endif %}#}
                                            {% endif %}
                                        {% endif %}
                                        <li><a class="tu" onclick="descargar_requisitos_admision('{{ inscripcion.id }}')" href="javascript:;"><span class="fa fa-arrow-down"></span> Descargar archivos</a>

                                    </ul>
                                </div>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class='row-fluid'>
        <div class="span12">
            {% if paging.num_pages > 20 %}
                <div class='pagination'>
                    <ul>
                        {% if paging.primera_pagina %}
                            <li><a class="bloqueo_pantalla" href="/admitidos?{% if carreraselect %}c={{ carreraselect }}&{% endif %}{% if search %}s={{ search }}&{% endif %}{% if mencionselect %}mencion={{ mencionselect }}&{% endif %}{% if estado %}estado={{ estado }}&{% endif %}{% if estadomatricula %}estadomatricula={{ estadomatricula }}&{% endif %}page=1">1</a></li>
                            <li><a href="/admitidos?{% if carreraselect %}c={{ carreraselect }}&{% endif %}{% if search %}s={{ search }}&{% endif %}{% if mencionselect %}mencion={{ mencionselect }}&{% endif %}{% if estado %}estado={{ estado }}&{% endif %}{% if estadomatricula %}estadomatricula={{ estadomatricula }}&{% endif %}page={{ paging.ellipsis_izquierda }}" class="active bloqueo_pantalla">...</a></li>
                        {% endif %}
                        {% for pagenumber in paging.paginas %}
                            <li {% if pagenumber == page.number %}class='active bloqueo_pantalla'{% endif %}><a href="/admitidos?{% if carreraselect %}c={{ carreraselect }}&{% endif %}{% if search %}s={{ search }}&{% endif %}{% if mencionselect %}mencion={{ mencionselect }}&{% endif %}{% if estado %}estado={{ estado }}&{% endif %}{% if estadomatricula %}estadomatricula={{ estadomatricula }}&{% endif %}page={{ pagenumber }}">{{ pagenumber }}</a></li>
                        {% endfor %}
                        {% if paging.ultima_pagina %}
                            <li><a href="/admitidos?{% if carreraselect %}c={{ carreraselect }}&{% endif %}{% if search %}s={{ search }}&{% endif %}{% if mencionselect %}mencion={{ mencionselect }}&{% endif %}{% if estado %}estado={{ estado }}&{% endif %}{% if estadomatricula %}estadomatricula={{ estadomatricula }}&{% endif %}page={{ paging.ellipsis_derecha }}" class="active bloqueo_pantalla">...</a></li>
                            <li><a class="bloqueo_pantalla" href="/admitidos?{% if carreraselect %}c={{ carreraselect }}&{% endif %}{% if search %}s={{ search }}&{% endif %}{% if mencionselect %}mencion={{ mencionselect }}&{% endif %}{% if estado %}estado={{ estado }}&{% endif %}{% if estadomatricula %}estadomatricula={{ estadomatricula }}&{% endif %}page={{ paging.num_pages }}">{{ paging.num_pages }}</a></li>
                        {% endif %}
                    </ul>
                </div>
            {% else %}
                <div class='pagination'>
                    <ul>
                        {% for pagenumber in paging.page_range %}
                            <li {% if pagenumber == page.number %}class='active bloqueo_pantalla'{% endif %} class="bloqueo_pantalla"><a href="/admitidos?{% if carreraselect %}c={{ carreraselect }}&{% endif %}{% if search %}s={{ search }}&{% endif %}{% if mencionselect %}mencion={{ mencionselect }}&{% endif %}{% if estado %}estado={{ estado }}&{% endif %}{% if estadomatricula %}estadomatricula={{ estadomatricula }}&{% endif %}page={{ pagenumber }}">{{ pagenumber }}</a></li>
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}
        </div>
    </div>
    <div class="modal fade static itemspanelpractica" id="itemspanelpractica" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Práctica Pre Profesionales </h3>
        </div>
        <div class="modal-body panelbodypractica">
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn cerrarpractica btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static itemspanelvinculacion" id="itemspanelvinculacion" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Proyectos de Vinculación </h3>
        </div>
        <div class="modal-body panelbodyvinculacion">
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn cerrarvinculacion btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static" id="itemspanelautorizar" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitleautorizado">Listado de autorizados</h3>
        </div>
        <div class="modal-body panelbodyautorizado">
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-cerrarautorizar btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static itemspanelf" id="itemspanelf" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle" style="font-size: 14px">Cambiar fecha nacimiento</h3>
        </div>
        <div class="modal-body panelbody">
            <span>Fecha nacimiento: </span>
            <input type='hidden' name='idi' id="idi" value=''/>
            <input class="selectorfecha nacimiento" type="text" value="{{ inscripcion.persona.nacimiento|date:'d-m-Y' }}">
        </div>
        <div class="modal-footer">
            <a href="javascript:;" class="btn cerrarf btn-danger"><i class="fa fa-close"></i> Cerrar</a>
            <a href="javascript:;" class="btn guardarf btn-success"><i class="fa fa-file-excel-o"></i> Generar</a>
        </div>
    </div>
    <div class="modal fade static" id="itemspanel" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitle">Mostrar detalles de pago</h3>
        </div>
        <div class="modal-body panelbody">
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-cerrar btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static" id="itemspanelrequisitos" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitlerequisitos">Mostrar detalles de requisitos</h3>
        </div>
        <div class="modal-body panelbodyrequisitos">
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" class="btn btn-cerrarrequisitos btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static" id="itemspanelinscribir" style="display: none;">
        <div class="modal-header">
            <h3 class="paneltitleinscribir">Inscribir/Matricular <span id="nombrepostulante"></span></h3>
        </div>
        <div class="modal-body panelbodyinscribir">
        </div>
        <div class="modal-footer">
            <table class="pull-right">
                <tr>
                    <td><a href="javascript:;" id="btninscribir" class="btn btn-inscribir btn-success">Inscribir/Matricular</a></td>
                    <td><a href="javascript:;" class="btn btn-cerrarinscribir btn-info">Cerrar</a></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="modal fade static" id="eliminarpostulante" style="display: none;">
        <div class="modal-header">
            <h4 id="justificacionpaneltitle">¿Está seguro de eliminar a postulante de maestría?.
                NOTA: Le recordamos que al eliminarlo, se borraran todos los registros de inscripción tales como:
                Evidencias de requisitos, exámen, entrevista.</h4>
        </div>
        <div class="modal-body">
            <input type="text" style="text-transform: uppercase" class="input-block-level" id="motivo">
        </div>
        <div class="modal-footer">
            <a href="javascript:;" id="eliminarpostulante_run" class="btn btn-success">Eliminar</a>
            <a href="javascript:;" id="eliminarpostulante_close" class="btn">Cerrar</a>
        </div>
    </div>

    <div class="modal fade static" id="adminitidomodalnotoficacionotracohorte" style="display: none;">
        <div class="modal-header">
            <h4 id="paneltitle">Envío a otra cohorte</h4>
            <h4 id="idnombrespostulanteotracohorte"></h4>
        </div>
        <div class="modal-body notoficacionotracohortebody">
            {#        <div class="alert alert-danger">#}
            {#            <h4 class="alert-heading">ALERTA</h4>#}
            {#            Al dar clic en Aceptar, se eliminará la inscripción en la cual aplicó.#}
            {#        </div>#}
            <p style="margin-top: 16px;">Esta seguro(a) que desea enviar a otra cohorte?</p>
            <div class="form-group">
                <label for="id_cohorteadmitido">Cohortes maestría</label>
                <select name="id_cohorte" id="id_cohorteadmitido" class="form-control imp-80">
                    {% for licor in listadocohortes %}
                        <option value="{{ licor.id }}">{{ licor }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label for="obersavioncambiocohorte">Observación</label>
                <input type="email" class="form-control imp-100" required="true" maxlength="250" id="obersavioncambiocohorte" name="obersavioncambiocohorte" placeholder="¿Por que  será el cambio?">
            </div>
            <input type="hidden" id="idinscripcioncohorteotracohorteadmitido" name="idinscripcioncohorteotracohorteadmitido">
        </div>
        <div class="modal-footer">
            <p style="text-align: right; margin-bottom: 0">
                <a href="javascript:;" id="boton_notoficacionaprobadaotracohorteadmintido" class='btn btn-success'> Enviar</a>
                <a href="javascript:;" id="cancel_notoficacioncancelaotracohorteadmitidos" class='btn btn-default'> Cancelar</a>
            </p>
        </div>
    </div>
{% endblock %}
